<div class="help-page">
    <h1 class="modal-title" id="modal-title">Help & FAQ - Command Reference</h1>

    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()">
        <span aria-hidden="true">&times;</span>
    </button>

    <!-- Search and Filter Section -->
    <div class="form-inline mb-4">
        <input type="search" id="searchInput" class="form-control w-100" placeholder="Search for a command..." ng-model="searchText" ng-change="filterCommands()">
        <select id="categoryFilter" class="form-control" ng-model="selectedCategory" ng-change="filterCommands()">
            <option value="">All Categories</option>
            <option value="kolibri">Monthend Reports</option>
            <option value="kolibri">Kolibri</option>
            <option value="linux">Linux</option>
        
        </select>
    </div>

    <!-- FAQ Section -->
    <div id="faqContainer" class="faq-section">
        <!-- FAQ entries -->
        <div class="card faq-card" ng-repeat="faq in filteredFaqs" ng-show="faqMatches(faq)" data-category="{{faq.category}}">
            <div class="card-header" id="heading{{$index}}" data-bs-toggle="collapse" data-bs-target="#collapse{{$index}}">
                <h5 class="mb-0">{{ faq.question }}</h5>
            </div>
            <div id="collapse{{$index}}" class="collapse" aria-labelledby="heading{{$index}}" data-bs-parent="#faqContainer">
                <div class="card-body">
                    <p>{{ faq.answer }}</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    angular.module('helpApp', [])
    .controller('HelpController', function($scope) {
        // FAQ data 
        $scope.faqs = [
            { category: 'kolibri', question: "What does 'monthend 09-24' do?", answer: "This submits monthend report for your centre. This command is used for both mid-month and monthend, where (09) is the month and (24) is the year. Substitute the month and the year with the right dates." },
            { category: 'kolibri', question: "What does 'make_quiz' do?", answer: "This command recreates quiz in Kolibri. Every time this runs, quizzes are regenerated." },
            { category: 'linux', question: "What does 'shutdown' do?", answer: "This command shuts down the session laptop, by first making a backup, then after that, the computer shuts down." },
            { category: 'kolibri', question: "What does 'restartko' do?", answer: "This command restarts Kolibri. It takes less than 3 minutes for Kolibri to start running again once this command is run." }
        ];

        $scope.searchText = '';
        $scope.selectedCategory = '';
        $scope.filteredFaqs = $scope.faqs;

        // Filter FAQs based on search input and category
        $scope.filterCommands = function() {
            var filter = $scope.searchText.toUpperCase();
            var category = $scope.selectedCategory;

            $scope.filteredFaqs = $scope.faqs.filter(function(faq) {
                var matchesCategory = category === '' || faq.category === category;
                var matchesSearch = faq.question.toUpperCase().indexOf(filter) > -1;
                return matchesCategory && matchesSearch;
            });
        };

        // Check if a FAQ matches the current filters
        $scope.faqMatches = function(faq) {
            var matchesCategory = $scope.selectedCategory === '' || faq.category === $scope.selectedCategory;
            var matchesSearch = faq.question.toUpperCase().indexOf($scope.searchText.toUpperCase()) > -1;
            return matchesCategory && matchesSearch;
        };
    });
</script>
